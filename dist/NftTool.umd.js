(function(){"use strict";try{if(typeof document!="undefined"){var o=document.createElement("style");o.appendChild(document.createTextNode("._wrapper_1vmn0_12{margin:1em auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;padding:20px 0;gap:30px}._form_1vmn0_22{width:100%}._form-param_1vmn0_1:not(:last-child){margin-bottom:16px}._form-label_1vmn0_1{display:block;font-weight:700;font-size:14px;padding-bottom:6px}._form-input_1vmn0_1{width:100%;padding:8px 12px;border-radius:4px;border:1px solid #EFF0F1;background-color:#f8f8f8;font-size:14px;line-height:1.4;outline:none}._form-input_1vmn0_1:focus{border-color:#007aff}._form-select_1vmn0_1{width:100%;padding:8px 12px;border-radius:4px;border:1px solid #EFF0F1;background-color:#f8f8f8;font-size:14px;line-height:1.4;outline:none;background-repeat:no-repeat;background-position:right 10px bottom 50%;cursor:pointer;appearance:none;-moz-appearance:none;-webkit-appearance:none}._form-select_1vmn0_1:focus{border-color:#007aff}._form-button_1vmn0_1{width:100%;padding:8px 12px;border-radius:4px;border:1px solid #EFF0F1;background-color:#fff;font-size:14px;line-height:1.4;color:#333;outline:none}._form-button_1vmn0_1:hover{cursor:pointer;background-color:#0000000d}._form-button_1vmn0_1:active{background-color:#0000001a}._form-button_1vmn0_1:focus{border-color:#007aff}._card_1vmn0_102{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:column;-ms-flex-align:column;align-items:column;padding:40px;width:230px;border-radius:16px;border:1px solid #EFF0F1;-webkit-box-shadow:0px 2px 3px rgba(0,0,0,.03);box-shadow:0 2px 3px #00000008;background:#FFFFFF}._media_1vmn0_117{border-radius:16px;overflow:hidden;width:100%;background-color:#f0f0f0}._media_1vmn0_117::-webkit-scrollbar{display:none}._title_1vmn0_130{margin-top:20px;font-style:normal;font-weight:700;font-size:16px;line-height:23px;text-align:center}._collection_1vmn0_141{margin-top:4px;font-weight:regular;font-size:14px;line-height:22px;text-align:center;color:#707684}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(d,r){typeof exports=="object"&&typeof module<"u"?module.exports=r():typeof define=="function"&&define.amd?define(r):(d=typeof globalThis<"u"?globalThis:d||self,d.NftTool=r())})(this,function(){"use strict";var u=Object.defineProperty;var k=(d,r,h)=>r in d?u(d,r,{enumerable:!0,configurable:!0,writable:!0,value:h}):d[r]=h;var l=(d,r,h)=>(k(d,typeof r!="symbol"?r+"":r,h),h);const o={wrapper:"_wrapper_1vmn0_12",form:"_form_1vmn0_22","form-param":"_form-param_1vmn0_1","form-label":"_form-label_1vmn0_1","form-input":"_form-input_1vmn0_1","form-select":"_form-select_1vmn0_1","form-button":"_form-button_1vmn0_1",card:"_card_1vmn0_102",media:"_media_1vmn0_117",title:"_title_1vmn0_130",collection:"_collection_1vmn0_141"},c='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 17V7L7 17V7M10 17C10 14.2663 10 11 10 11M14 7H10V11M12.5 11H10M16.5 7H19M21.5 7H19M19 7V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',f='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>';class e{static make(n,t="",s={}){const i=document.createElement(n);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a]);return i}}class m{constructor({data:n,config:t,api:s,readOnly:i}){l(this,"api");l(this,"readOnly");l(this,"data");l(this,"config");l(this,"nodes");this.data=n,this.config=t,this.api=s,this.readOnly=i,this.nodes={}}static get toolbox(){return{icon:c,title:"NFT Token Card"}}static get pasteConfig(){return{patterns:{opensea:m.regexp}}}static get isReadOnlySupported(){return!0}render(){return this.nodes.wrapper=e.make("div",o.wrapper),this.nodes.form=e.make("div",o.form),this.nodes.formNetworkWrapper=e.make("div",o["form-param"]),this.nodes.formNetworkLabel=e.make("label",o["form-label"]),this.nodes.formNetworkLabel.innerHTML="Network",this.nodes.formNetworkWrapper.appendChild(this.nodes.formNetworkLabel),this.nodes.formNetworkSelect=e.make("select",o["form-select"]),this.nodes.formNetworkSelect.style.backgroundImage=`url(data:image/svg+xml;utf8,${encodeURI(f)})`,[{value:"ethereum",label:"Ethereum"},{value:"matic",label:"Polygon"}].forEach(n=>{const t=e.make("option");t.value=n.value,t.innerHTML=n.label,this.data.network===n.value&&(t.selected=!0),this.nodes.formNetworkSelect.appendChild(t)}),this.nodes.formNetworkWrapper.appendChild(this.nodes.formNetworkSelect),this.nodes.formContractAddressWrapper=e.make("div",o["form-param"]),this.nodes.formContractAddressLabel=e.make("label",o["form-label"]),this.nodes.formContractAddressLabel.innerHTML="Contract Address",this.nodes.formContractAddressWrapper.appendChild(this.nodes.formContractAddressLabel),this.nodes.formContractAddressInput=e.make("input",o["form-input"]),this.nodes.formContractAddressInput.placeholder="0x...",this.nodes.formContractAddressWrapper.appendChild(this.nodes.formContractAddressInput),this.nodes.formTokenIdWrapper=e.make("div",o["form-param"]),this.nodes.formTokenIdLabel=e.make("label",o["form-label"]),this.nodes.formTokenIdLabel.innerHTML="Token ID",this.nodes.formTokenIdWrapper.appendChild(this.nodes.formTokenIdLabel),this.nodes.formTokenIdInput=e.make("input",o["form-input"]),this.nodes.formTokenIdInput.placeholder="12345",this.nodes.formTokenIdWrapper.appendChild(this.nodes.formTokenIdInput),this.nodes.formRefetchButton=e.make("button",o["form-button"]),this.nodes.formRefetchButton.innerHTML="Fetch NFT",this.nodes.formRefetchButton.addEventListener("click",()=>{this.fetchNft()}),this.nodes.form.appendChild(this.nodes.formNetworkWrapper),this.nodes.form.appendChild(this.nodes.formContractAddressWrapper),this.nodes.form.appendChild(this.nodes.formTokenIdWrapper),this.nodes.form.appendChild(this.nodes.formRefetchButton),this.nodes.card=e.make("div",o.card),this.nodes.media=e.make("div"),this.nodes.title=e.make("div",o.title),this.nodes.collection=e.make("div",o.collection),this.nodes.card.appendChild(this.nodes.media),this.nodes.card.appendChild(this.nodes.title),this.nodes.card.appendChild(this.nodes.collection),this.nodes.wrapper.appendChild(this.nodes.form),this.nodes.wrapper.appendChild(this.nodes.card),this.data.contractAddress&&this.data.tokenId&&this.loadNftData(this.data),this.nodes.wrapper}save(){return this.data}onPaste(n){try{const{data:t}=n.detail,s=t.match(m.regexp);if(!s||s.length<4)throw new Error("Invalid NFT link. Use OpenSea link for Ethereum or Polygon network token.");const i={network:s[1],contractAddress:s[2],tokenId:s[3]};this.loadNftData(i)}catch(t){this.api.notifier.show({message:t.message,style:"error"})}}fetchNft(){const n=this.nodes.formNetworkSelect.value,t=this.nodes.formContractAddressInput.value,s=this.nodes.formTokenIdInput.value,i={network:n,contractAddress:t,tokenId:s};this.loadNftData(i)}async loadNftData(n){const{network:t,contractAddress:s,tokenId:i}=n;if(!this.config.endpoint){this.api.notifier.show({message:"Endpoint API is not set",style:"error"});return}try{const a={network:t,contractAddress:s,tokenId:i},p=await(await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();if(!p.success)throw new Error(p.message);this.data=p.message,this.fillNftCard()}catch(a){this.api.notifier.show({message:a.message,style:"error"})}}fillNftCard(){this.data.media.endsWith("mp4")?this.nodes.imageElement=e.make("video",o.media,{src:this.data.media,playsinline:!0,muted:!0,autoplay:!0,loop:!0}):this.nodes.imageElement=e.make("img",o.media,{src:this.data.media}),this.nodes.media&&(this.nodes.media.innerHTML="",this.nodes.media.appendChild(this.nodes.imageElement)),this.nodes.collection&&(this.nodes.collection.innerText=this.data.collection),this.nodes.title&&(this.nodes.title.innerText=this.data.title),this.nodes.formNetworkSelect&&(this.nodes.formNetworkSelect.value=this.data.network),this.nodes.formContractAddressInput&&(this.nodes.formContractAddressInput.value=this.data.contractAddress),this.nodes.formTokenIdInput&&(this.nodes.formTokenIdInput.value=this.data.tokenId)}static get regexp(){return/^https:\/\/opensea\.io\/assets\/([a-zA-Z]+)\/([A-Za-z0-9]+)\/(([A-Za-z0-9]+))$/i}}return m});
